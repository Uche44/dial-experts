

generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  user
  expert
}


model User {
  id            String   @id @default(cuid())
  name          String
  email         String   @unique
  walletAddress String?  @unique            
  role          UserRole @default(user)
  avatar        String?
  expertProfile ExpertProfile?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([email])
  @@index([walletAddress])
  @@index([role])
}

model ExpertProfile {
  id             String   @id @default(cuid())
  userId         String   @unique
  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  field          String
  bio            String
  ratePerMin     Int
  status         String   @default("pending")
  availability   Json     @default("{}")
  
  cvUrl          String?
  certificateUrl String?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
  @@index([status])
}